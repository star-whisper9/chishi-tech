import{X as ee,Y as te,Z as se,g as ne,a as re,r as N,_ as ie,E as oe,n as ae,j as s,s as ce,d as le,e as ue,$ as W,a0 as de,a1 as B,a2 as P,a3 as T,a4 as pe,C as me,a5 as fe,v as he,S as H,a6 as ge,T as x,t as R,M as xe}from"./index-CE-HoWnH.js";import{u as ye}from"./useApiSpecs-DNXGbPfD.js";import{C as Ce}from"./Chip-wWqDNlsY.js";function be({props:e,name:n}){return ee({props:e,name:n,defaultTheme:te,themeId:se})}function ve(e){return ne("MuiMasonry",e)}re("MuiMasonry",["root"]);const p=e=>Number(e.replace("px","")),je={flexBasis:"100%",width:0,margin:0,padding:0},Me=e=>{const{classes:n}=e;return ue({root:["root"]},ve,n)},Ne=({ownerState:e,theme:n})=>{let t={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const i={};if(e.isSSR){const o={},r=p(n.spacing(e.defaultSpacing));for(let c=1;c<=e.defaultColumns;c+=1)o[`&:nth-of-type(${e.defaultColumns}n+${c%e.defaultColumns})`]={order:c};return i.height=e.defaultHeight,i.margin=-(r/2),i["& > *"]={...t["& > *"],...o,margin:r/2,width:`calc(${(100/e.defaultColumns).toFixed(2)}% - ${r}px)`},{...t,...i}}const a=W({values:e.spacing,breakpoints:n.breakpoints.values}),d=de(n);t=B(t,P({theme:n},a,o=>{let r;if(typeof o=="string"&&!Number.isNaN(Number(o))||typeof o=="number"){const c=Number(o);r=T(d,c)}else r=o;return{margin:`calc(0px - (${r} / 2))`,"& > *":{margin:`calc(${r} / 2)`},...e.maxColumnHeight&&{height:typeof r=="number"?Math.ceil(e.maxColumnHeight+p(r)):`calc(${e.maxColumnHeight}px + ${r})`}}}));const l=W({values:e.columns,breakpoints:n.breakpoints.values});return t=B(t,P({theme:n},l,o=>{const c=`${(100/Number(o)).toFixed(2)}%`,y=typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"?T(d,Number(a)):"0px";return{"& > *":{width:`calc(${c} - ${y})`}}})),typeof a=="object"&&(t=B(t,P({theme:n},a,(o,r)=>{if(r){const c=Number(o),y=Object.keys(l).pop(),E=T(d,c);return{"& > *":{width:`calc(${`${(100/(typeof l=="object"?l[r]||l[y]:l)).toFixed(2)}%`} - ${E})`}}}return null}))),t},Se=ce("div",{name:"MuiMasonry",slot:"Root"})(Ne),ke=N.forwardRef(function(n,t){const i=be({props:n,name:"MuiMasonry"}),{children:a,className:d,component:b="div",columns:l=4,spacing:m=1,sequential:o=!1,defaultColumns:r,defaultHeight:c,defaultSpacing:y,...E}=i,f=N.useRef(),[w,D]=N.useState(),I=!w&&c&&r!==void 0&&y!==void 0,[_,q]=N.useState(I?r-1:0),O={...i,spacing:m,columns:l,maxColumnHeight:w,defaultColumns:r,defaultHeight:c,defaultSpacing:y,isSSR:I},G=Me(O),V=N.useCallback(h=>{if(!f.current||!h||h.length===0)return;const u=f.current,S=f.current.firstChild,z=u.clientWidth,L=S.clientWidth;if(z===0||L===0)return;const U=window.getComputedStyle(S),Z=p(U.marginLeft),J=p(U.marginRight),k=Math.round(z/(L+Z+J)),v=new Array(k).fill(0);let j=!1,M=1;u.childNodes.forEach(g=>{if(g.nodeType!==Node.ELEMENT_NODE||g.dataset.class==="line-break"||j)return;const A=window.getComputedStyle(g),K=p(A.marginTop),Q=p(A.marginBottom),F=p(A.height)?Math.ceil(p(A.height))+K+Q:0;if(F===0){j=!0;return}for(let C=0;C<g.childNodes.length;C+=1){const $=g.childNodes[C];if($.tagName==="IMG"&&$.clientHeight===0){j=!0;break}}if(!j)if(o)v[M-1]+=F,g.style.order=M,M+=1,M>k&&(M=1);else{const C=v.indexOf(Math.min(...v));v[C]+=F;const $=C+1;g.style.order=$}}),j||ie.flushSync(()=>{D(Math.max(...v)),q(k>0?k-1:0)})},[o]);oe(()=>{if(typeof ResizeObserver>"u")return;let h;const u=new ResizeObserver(()=>{h=requestAnimationFrame(V)});return f.current&&f.current.childNodes.forEach(S=>{u.observe(S)}),()=>{h&&cancelAnimationFrame(h),u&&u.disconnect()}},[l,m,a,V]);const X=ae(t,f),Y=new Array(_).fill("").map((h,u)=>s.jsx("span",{"data-class":"line-break",style:{...je,order:u+1}},u));return s.jsxs(Se,{as:b,className:le(G.root,d),ref:X,ownerState:O,...E,children:[a,Y]})}),Ae=({service:e,versions:n,endpointCount:t,info:i})=>{const a=pe(),d=i,b=n[n.length-1]||n[0],l=()=>{a(`/api/${e}/${b}`)};return s.jsx(me,{variant:"outlined",sx:{display:"flex",flexDirection:"column"},children:s.jsx(fe,{onClick:l,children:s.jsx(he,{children:s.jsxs(H,{spacing:2,children:[s.jsxs(H,{direction:"row",alignItems:"center",spacing:1,children:[s.jsx(ge,{color:"primary"}),s.jsx(x,{variant:"h6",component:"div",children:d?.title||e})]}),s.jsx(x,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line"},children:d?.description||`包含 ${t} 个接口端点`}),s.jsxs(R,{children:[s.jsx(x,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"可用版本"}),s.jsx(H,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:n.map(m=>s.jsx(Ce,{label:m,size:"small",variant:m===b?"filled":"outlined",color:"primary"},m))})]})]})})})})},$e=()=>{const{bundles:e}=ye(),n=new Map;return e.forEach(t=>{const i=n.get(t.service);i?(i.versions.push(t.version),i.endpointCount+=t.endpoints.length):n.set(t.service,{versions:[t.version],endpointCount:t.endpoints.length})}),n.size===0?s.jsxs(R,{sx:{py:6,textAlign:"center"},children:[s.jsx(x,{variant:"h6",color:"text.secondary",children:"暂无 API 服务"}),s.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"请在 src/apispec/ 目录下添加 OpenAPI 规范文件"})]}):s.jsxs(R,{sx:{py:6},children:[s.jsxs(R,{textAlign:"center",mb:6,children:[s.jsx(x,{variant:"h3",gutterBottom:!0,children:"API 服务"}),s.jsx(x,{variant:"h6",color:"text.secondary",children:"浏览所有可用的 HTTP API 文档"})]}),s.jsx(ke,{columns:{xs:1,sm:2,md:3},spacing:3,children:Array.from(n.entries()).map(([t,i])=>s.jsx(Ae,{service:t,versions:i.versions,endpointCount:i.endpointCount,info:e.find(a=>a.service===t)?.raw.info},t))})]})},Fe=()=>s.jsx(xe,{title:"API 文档",titleSuffix:"服务列表",children:s.jsx($e,{})});export{Fe as default};
