openapi: 3.0.3
info:
  title: Toolbox API
  version: v1
  description: 基础工具箱服务的接口集合（示例）。
servers:
  - url: https://api.example.com
    description: 示例主服务
tags:
  - name: video
    description: 视频处理相关接口
  - name: util
    description: 通用工具函数接口
paths:
  /videos/{id}:
    get:
      operationId: getVideoById
      summary: 获取单个视频元信息
      description: 根据视频唯一标识返回元信息（不含实际文件）。
      tags: [video]
      parameters:
        - name: id
          in: path
          required: true
          description: 视频ID
          schema:
            type: string
        - name: includeDetails
          in: query
          required: false
          description: 是否包含附加细节
          schema:
            type: boolean
      responses:
        "200":
          description: 成功返回
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VideoMeta"
        "404":
          description: 视频不存在
      x-error-codes:
        - code: VIDEO_NOT_FOUND
          httpStatus: 404
          message: 视频不存在
          solution: 请检查视频ID是否正确
    delete:
      operationId: deleteVideo
      summary: 删除视频
      description: 删除指定视频记录（异步删除文件）。
      tags: [video]
      parameters:
        - name: id
          in: path
          required: true
          description: 视频ID
          schema:
            type: string
      responses:
        "204":
          description: 删除成功，无内容
        "404":
          description: 视频不存在
  /videos:
    post:
      operationId: createVideo
      summary: 创建新视频记录
      description: 上传视频元信息并生成记录（文件需单独上传）。
      tags: [video]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VideoCreateRequest"
      responses:
        "201":
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VideoMeta"
        "400":
          description: 请求参数错误
      x-error-codes:
        - code: INVALID_VIDEO_TITLE
          httpStatus: 400
          message: 标题不能为空或过长
          solution: 标题长度应在1-100字符之间
  /utils/ping:
    get:
      operationId: ping
      summary: 健康检查
      tags: [util]
      responses:
        "200":
          description: 服务正常
          content:
            text/plain:
              schema:
                type: string
components:
  schemas:
    VideoMeta:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        duration:
          type: integer
      required: [id, title]
    VideoCreateRequest:
      type: object
      properties:
        title:
          type: string
          description: 视频标题
          example: "我的第一个视频"
        duration:
          type: integer
          description: 视频时长（秒）
          example: 120
        tags:
          type: array
          items:
            type: string
          description: 标签列表
          example: ["教程", "编程"]
      required: [title]
